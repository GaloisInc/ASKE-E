parameter beta = 0.4
parameter gamma = 0.04
parameter i_initial = 3.0
parameter r_initial = 0.0
parameter s_initial = 997.0
let total_population = S + I + R
I(0) = i_initial
R(0) = r_initial
S(0) = s_initial
d/dt I = (if 0.0 < S and 0.0 < I then beta * S * I / total_population else 0.0) + (if 0.0 < I then -gamma * I else 0.0)
d/dt R = if 0.0 < I then gamma * I else 0.0
d/dt S = if 0.0 < S and 0.0 < I then -beta * S * I / total_population else 0.0