<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ASKE-E Documentation</title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="easel.html"><strong aria-hidden="true">1.</strong> EASEL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="model.html"><strong aria-hidden="true">1.1.</strong> model</a></li><li class="chapter-item expanded "><a href="let-variable.html"><strong aria-hidden="true">1.2.</strong> let-Declared Variables</a></li><li class="chapter-item expanded "><a href="state-variable.html"><strong aria-hidden="true">1.3.</strong> state-Declared Variables</a></li><li class="chapter-item expanded "><a href="event.html"><strong aria-hidden="true">1.4.</strong> events</a></li><li class="chapter-item expanded "><a href="when.html"><strong aria-hidden="true">1.5.</strong> when</a></li><li class="chapter-item expanded "><a href="rate.html"><strong aria-hidden="true">1.6.</strong> rate</a></li><li class="chapter-item expanded "><a href="effect.html"><strong aria-hidden="true">1.7.</strong> effect</a></li><li class="chapter-item expanded "><a href="example.html"><strong aria-hidden="true">1.8.</strong> Example</a></li></ol></li><li class="chapter-item expanded "><a href="donu.html"><strong aria-hidden="true">2.</strong> Donu</a></li><li class="chapter-item expanded "><a href="gromet/PrTNet.html"><strong aria-hidden="true">3.</strong> Gromet</a></li><li class="chapter-item expanded "><a href="milestones.html"><strong aria-hidden="true">4.</strong> Milestones</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">ASKE-E Documentation</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="about"><a class="header" href="#about">About</a></h1>
<p>EASEL is a modeling language, able to represent compartmental and other
scientific models in a concise, human- and machine-readable way. It builds off
Galois's experience with the AMIDOL IR, and is intended to supplant it in the
long term. It, like the AMIDOL IR, is meant to represent stochastic Petri nets
with a form of inhibitor arcs.</p>
<p>What follows is an explanation of this language's format and features by
example, the example being an adapted, subset version of the CHIME
epidemiological model from UPenn.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="models"><a class="header" href="#models"><code>model</code>s</a></h1>
<p>A <code>model</code> is a named entity (<code>CHIME</code> in the <a href="./example.html">example</a>), followed by a set of
declarations of state and other variables, followed by a set of declarations of
events that may depend on or modify these variables, modulo some rules.</p>
<p><code>model</code>s are constructed blockwise in a whitespace-sensitive way that should be
familiar to users of YAML and other similar languages.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="let-declared-variables"><a class="header" href="#let-declared-variables"><code>let</code>-Declared Variables</a></h1>
<pre><code class="language-easel">  let s_Initial = 999.0
  ...
  let beta =
    cond:
      gamma              if time &lt;= policy_days0
      gamma + 0.1486983  if time &lt;= policy_days1
      gamma + 0.0717734  otherwise
</code></pre>
<p>Variables declared with <code>let</code> may represent a constant (in the case of
<code>s_Initial</code>) or an expression (in the case of <code>beta</code>). During model
simulation/execution, at use sites, <code>let</code> variable right-hand sides are
inlined. It follows that the value of a <code>let</code> variable might not remain the same
throughout a model (indeed, <code>beta</code> does not). It is also the case that <code>let</code>
variables cannot be modified in an <code>event</code>'s <code>effect</code> section.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="state-declared-variables"><a class="header" href="#state-declared-variables"><code>state</code>-Declared Variables</a></h1>
<pre><code class="language-easel">  state Susceptible = s_Initial
  state Infected    = i_Initial
  state Recovered   = r_Initial
</code></pre>
<p>Variables declared with <code>state</code> differ internally from <code>let</code>-declared variables
in that they may be modified in an <code>event</code>'s <code>effect</code> block. These variables may
be used to represent what the <code>model</code> is actually modeling - that is, they may
be the output of an execution/simulation of a model (though they needn't be).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="events"><a class="header" href="#events"><code>event</code>s</a></h1>
<pre><code class="language-easel">  event Infect:
  ...
</code></pre>
<p>An <code>event</code> consists of an enabling predicate (a <code>when</code> block), a <code>rate</code> (how
likely this event is to &quot;fire&quot;), and an <code>effect</code>, which describes what happens
when the event fires (an &quot;output predicate&quot;, in some previous Galois
literature).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="when"><a class="header" href="#when"><code>when</code></a></h1>
<pre><code class="language-easel">    when:
      Susceptible &gt; 0.0 and Infected &gt; 0.0
</code></pre>
<p>An expression defined on <code>let</code> variables and <code>state</code> variables, evaluating to a
Boolean, which determines whether or not an event is able to fire. An event must
have a true <code>when</code> <em>and</em> be chosen stochastically based on its rate in order to
fire.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rate"><a class="header" href="#rate"><code>rate</code></a></h1>
<pre><code class="language-easel">    rate:
      beta * (1 - contact_rate) * Susceptible * Infected / total_pop
</code></pre>
<p>An expression defined on <code>let</code> variables and <code>state</code> variables, evaluating to a
real, which represents the frequency with which an event fires. In simulation,
events would be chosen stochastically based on this value - a rate of <code>0.8</code>
means at any given time step an event would have an 80% chance of firing.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="effect"><a class="header" href="#effect"><code>effect</code></a></h1>
<pre><code class="language-easel">    effect:
      Susceptible -= 1.0
      Infected    = Infected + 1.0
</code></pre>
<p>What happens when the model fires. This is a series of assignments, executed in
order, that may change the value of some or all of the <code>state</code> variables in the
<code>model</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="example"><a class="header" href="#example">Example</a></h1>
<pre><code class="language-easel">model CHIME_GTRI_IR:
  let  s_Initial = 999.0
  let  i_Initial = 10.0
  let  r_Initial = 0.0

  state Susceptible = s_Initial
  state Infected    = i_Initial
  state Recovered   = r_Initial

  let gamma = 1.0 / 14.0
  let policy_days0 = 37.0
  let policy_days1 = 77.0
  let contact_rate = 0.05

  let total_pop = Susceptible + Infected + Recovered
  let beta =
    cond:
      gamma              if time &lt;= policy_days0
      gamma + 0.1486983  if time &lt;= policy_days1
      gamma + 0.0717734  otherwise

  # or
  # let beta =
  #   if time &lt;= policy_days0
  #     then gamma
  #   else if time &lt;= policy_days1
  #     then gamma + 0.1486983
  #   else
  #     gamma + 0.0717734

  event Infect:
    when:
      Susceptible &gt; 0.0 and Infected &gt; 0.0

    rate: 
      beta * (1 - contact_rate) * Susceptible * Infected / total_pop

    effect:
      Susceptible = Susceptible - 1.0
      Infected    = Infected + 1.0

  event Cure:
    when:
      Infected &gt; 0.0

    rate:
      gamma * Infected

    effect:
      Infected  = Infected - 1.0
      Recovered = Recovered + 1.0

          
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="donu-documentation"><a class="header" href="#donu-documentation">Donu Documentation</a></h1>
<h2 id="about-donu"><a class="header" href="#about-donu">About Donu</a></h2>
<p>Donu is the webservice that is able to run simulations and various kinds of analysis on models
for the ASKE-E program.</p>
<h2 id="calling-convention"><a class="header" href="#calling-convention">Calling Convention</a></h2>
<p>All operations are implemented at path <code>/</code> and are indifferent to HTTP verb 
(<code>GET</code>, <code>POST</code>, etc.)</p>
<h2 id="response-convention"><a class="header" href="#response-convention">Response Convention</a></h2>
<p><em>All</em> responses return a two-element dict. </p>
<p>On success, the members are <code>&quot;status&quot;</code>, which will map to the literal string <code>&quot;success&quot;</code>, and <code>&quot;result&quot;</code>, which will map to a dict containing whatever is specified below in a command's <strong>Response</strong> section.</p>
<p>On error, the members are <code>&quot;status&quot;</code>, which will map to the literal string <code>&quot;error&quot;</code>, and <code>&quot;error&quot;</code>, which will map to a string description of the error.</p>
<p>The provided examples reflect this schema.</p>
<h2 id="types"><a class="header" href="#types">Types</a></h2>
<h3 id="datasource"><a class="header" href="#datasource"><code>datasource</code></a></h3>
<p>A <code>datasource</code> is either an object with the single field <code>file</code> with :</p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>file</td><td>string</td><td>Filename to use as a data source</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{ &quot;file&quot;: &quot;model.gromet&quot; }
</code></pre>
<p>Or a string containing the data itself:</p>
<pre><code class="language-JSON">&quot;model SIR:\n  let beta = 0.4\n  let gamma = 0.04\n  let s_initial = 997...&quot;
</code></pre>
<h3 id="model-def"><a class="header" href="#model-def"><code>model-def</code></a></h3>
<p>A model def is a <code>datasource</code> along with a model type.  Valid model types are <code>easel</code>, <code>diff-eqs</code>, <code>core</code>, and <code>gromet-prt</code>.</p>
<p>Example:</p>
<pre><code>{
  &quot;source&quot;: { &quot;file&quot;: &quot;modelRepo/easel/sir.easel&quot; },
  &quot;type&quot;: &quot;easel&quot;
}
</code></pre>
<h2 id="operations"><a class="header" href="#operations">Operations</a></h2>
<h3 id="list-models---list-the-available-models"><a class="header" href="#list-models---list-the-available-models"><code>list-models</code> - List the available models</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;list-models&quot;</code></td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{ &quot;command&quot;: &quot;list-models&quot;}
</code></pre>
<p><strong>Response:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>models</td><td>list</td><td>list of &quot;model-def++&quot; objects - guaranteed to have the same members as a model-def object, but will also include <code>&quot;name&quot;</code> and <code>&quot;description&quot;</code> members for ESL models</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;models&quot;: [
      {
        &quot;source&quot;: { &quot;file&quot;: &quot;modelRepo/easel/sir.easel&quot; },
        &quot;type&quot;: &quot;easel&quot;,
        &quot;name&quot;: &quot;SIR&quot;,
        &quot;description&quot;: &quot;No description.&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="simulate---simulate-a-model-using-odes"><a class="header" href="#simulate---simulate-a-model-using-odes"><code>simulate</code> - Simulate a model using ODEs</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;simulate&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td></tr>
<tr><td>start</td><td>number</td><td>Start time of the simulation</td></tr>
<tr><td>end</td><td>number</td><td>End time of the simulation</td></tr>
<tr><td>step</td><td>number</td><td>Simulation time step size</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;simulate&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: { &quot;file&quot;: &quot;modelRepo/easel/sir.easel&quot; }
  },
  &quot;start&quot;: 0,
  &quot;end&quot;: 120.0,
  &quot;step&quot;: 30.0,
  &quot;parameters&quot;: {
    &quot;beta&quot;: 0.6
  }
}
</code></pre>
<p><strong>Response:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>times</td><td>list of number</td><td>series of times used in simulation</td></tr>
<tr><td>values</td><td>result series object</td><td>values of state varaibles</td></tr>
</tbody></table>
<p>The object in <code>values</code> is such that each key is the name of a model variable <code>V</code> and each value is a list <code>l</code> such that <code>V</code> has the value <code>l[x]</code> at time <code>times[x]</code>.</p>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;values&quot;: {
      &quot;I&quot;: [
        3,
        396.20766691080604,
        119.33588838987737,
        35.943279530151585,
        10.825907756942332
      ],
      &quot;S&quot;: [
        997,
        0.0012550867795002216,
        2.4726152151230926e-06,
        3.7868257221162325e-07,
        2.151977671793774e-07
      ],
      &quot;R&quot;: [
        0,
        603.7910780024147,
        880.6641091375077,
        964.0567200911661,
        989.1740920278602
      ]
    },
    &quot;times&quot;: [
      0,
      30,
      60,
      90,
      120
    ]
  }
}
</code></pre>
<h3 id="get-model-schematic---get-schematic-description-of-a-model"><a class="header" href="#get-model-schematic---get-schematic-description-of-a-model"><code>get-model-schematic</code> - get schematic description of a model</a></h3>
<p>This call gets a high level schematic description of a model as a graph.  Not all models support this visualization.</p>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;get-model-schematic&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;get-model-schematic&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: { &quot;file&quot;: &quot;modelRepo/easel/sir.easel&quot; }
  }
}
</code></pre>
<p><strong>Response:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>nodes</td><td>list of node</td><td>A node has a <code>name</code> and a <code>type</code></td></tr>
<tr><td>edges</td><td>list of edge</td><td>An edge is a &quot;tuple&quot; mapping one node to another</td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;nodes&quot;: [
      {
        &quot;name&quot;: &quot;Infect&quot;,
        &quot;type&quot;: &quot;event&quot;
      },
      {
        &quot;name&quot;: &quot;S&quot;,
        &quot;type&quot;: &quot;state&quot;
      },
      {
        &quot;name&quot;: &quot;I&quot;,
        &quot;type&quot;: &quot;state&quot;
      },
      {
        &quot;name&quot;: &quot;Remove&quot;,
        &quot;type&quot;: &quot;event&quot;
      },
      {
        &quot;name&quot;: &quot;R&quot;,
        &quot;type&quot;: &quot;state&quot;
      }
    ],
    &quot;edges&quot;: [
      [
        {
          &quot;name&quot;: &quot;Infect&quot;,
          &quot;type&quot;: &quot;event&quot;
        },
        {
          &quot;name&quot;: &quot;I&quot;,
          &quot;type&quot;: &quot;state&quot;
        }
      ],
      [
        {
          &quot;name&quot;: &quot;S&quot;,
          &quot;type&quot;: &quot;state&quot;
        },
        {
          &quot;name&quot;: &quot;Infect&quot;,
          &quot;type&quot;: &quot;event&quot;
        }
      ],
      [
        {
          &quot;name&quot;: &quot;I&quot;,
          &quot;type&quot;: &quot;state&quot;
        },
        {
          &quot;name&quot;: &quot;Remove&quot;,
          &quot;type&quot;: &quot;event&quot;
        }
      ],
      [
        {
          &quot;name&quot;: &quot;Remove&quot;,
          &quot;type&quot;: &quot;event&quot;
        },
        {
          &quot;name&quot;: &quot;R&quot;,
          &quot;type&quot;: &quot;state&quot;
        }
      ]
    ]
  }
}
</code></pre>
<h3 id="get-model-source---get-source-code-for-a-model"><a class="header" href="#get-model-source---get-source-code-for-a-model"><code>get-model-source</code> - get source code for a model</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;get-model-source&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;get-model-source&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: { &quot;file&quot;: &quot;modelRepo/easel/sir.easel&quot; }
  }
}
</code></pre>
<p><strong>Response:</strong></p>
<p>The result, if successful, is a <code>model-def</code> object with the source inline.</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;source&quot;: &quot;model SIR:\n  let beta = 0.4\n  let gamma = 0.04\n\n  let s_initial = 997\n  let i_initial = 3\n  let r_initial = 0\n\n  state S = s_initial\n  state I = i_initial\n  state R = r_initial\n\n  let total_population = S + I + R\n\n  event Infect:\n    when:\n      S &gt; 0 and I &gt; 0\n    rate: \n      beta * S * I / total_population\n    effect:\n      S -= 1\n      I += 1\n      \n  event Remove:\n    when:\n      I &gt; 0\n    rate: \n      gamma * I\n    effect:\n      I -= 1\n      R += 1\n      \n      &quot;,
    &quot;type&quot;: &quot;easel&quot;
  }
}
</code></pre>
<h3 id="convert-model---convert-a-model-from-one-form-to-another"><a class="header" href="#convert-model---convert-a-model-from-one-form-to-another"><code>convert-model</code> - convert a model from one form to another</a></h3>
<p>May fail if the conversion is not supported.</p>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;convert-model&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td></tr>
<tr><td>dest-type</td><td>string</td><td>Model type to convert to - same fields <code>model-def</code>'s <code>type</code> field</td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;convert-model&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: { &quot;file&quot;: &quot;modelRepo/easel/sir.easel&quot; }
  },
  &quot;dest-type&quot;:&quot;diff-eqs&quot;
}
</code></pre>
<p><strong>Response:</strong></p>
<p>The result, if successful, is a <code>model-def</code> object with the new model inline.</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;source&quot;: &quot;let beta = 0.4\nlet gamma = 0.04\nlet i_initial = 3.0\nlet r_initial = 0.0\nlet s_initial = 997.0\nlet total_population = S + I + R\nI(0) = 3.0\nR(0) = 0.0\nS(0) = 997.0\nd/dt I = (if 0.0 &lt; S and 0.0 &lt; I then 0.4 * S * I / (S + R + I) else 0.0) + (if 0.0 &lt; I then -0.04 * I else 0.0)\nd/dt R = if 0.0 &lt; I then 0.04 * I else 0.0\nd/dt S = if 0.0 &lt; S and 0.0 &lt; I then -0.4 * S * I / (S + R + I) else 0.0&quot;,
    &quot;type&quot;: &quot;diff-eqs&quot;
  }
}
</code></pre>
<h3 id="describe-model-interface---describe-parameters-of-a-model"><a class="header" href="#describe-model-interface---describe-parameters-of-a-model"><code>describe-model-interface</code> - describe parameters of a model</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;describe-model-interface&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;describe-model-interface&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: {
      &quot;file&quot;: &quot;modelRepo/easel/sir.easel&quot;
    }
  }
}
</code></pre>
<p><strong>Response</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>stateVars</td><td>list of state variable</td><td>A state variable has a <code>name</code> and some <code>metadata</code></td></tr>
<tr><td>parameters</td><td>list of parameter</td><td>A parameter has a <code>name</code>, some <code>metadata</code>, and a <code>defaultValue</code></td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;stateVars&quot;: [
      {
        &quot;metadata&quot;: {
          &quot;Description&quot;: &quot;Susceptible population&quot;
        },
        &quot;name&quot;: &quot;S&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;Description&quot;: &quot;Infected population&quot;
        },
        &quot;name&quot;: &quot;I&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;Description&quot;: &quot;Recovered population&quot;
        },
        &quot;name&quot;: &quot;R&quot;
      }
    ],
    &quot;parameters&quot;: [
      {
        &quot;metadata&quot;: {
          &quot;Description&quot;: &quot;The average number of contacts per person per time, multiplied by the probability of disease transmission in a contact between a susceptible and an infectious subject&quot;
        },
        &quot;name&quot;: &quot;beta&quot;,
        &quot;defaultValue&quot;: 0.4
      },
      {
        &quot;metadata&quot;: {
          &quot;Description&quot;: &quot;Rate of recovery from infection&quot;
        },
        &quot;name&quot;: &quot;gamma&quot;,
        &quot;defaultValue&quot;: 0.04
      },
      {
        &quot;metadata&quot;: {
          &quot;Description&quot;: &quot;Initial population of suceptible people.&quot;
        },
        &quot;name&quot;: &quot;s_initial&quot;,
        &quot;defaultValue&quot;: 997
      },
      {
        &quot;metadata&quot;: {
          &quot;Description&quot;: &quot;Initial population of infected people.&quot;
        },
        &quot;name&quot;: &quot;i_initial&quot;,
        &quot;defaultValue&quot;: 3
      },
      {
        &quot;metadata&quot;: {
          &quot;Description&quot;: &quot;Initial population of recovered people.&quot;
        },
        &quot;name&quot;: &quot;r_initial&quot;,
        &quot;defaultValue&quot;: 0
      }
    ]
  }
}
</code></pre>
<h3 id="upload-model---upload-a-new-model"><a class="header" href="#upload-model---upload-a-new-model"><code>upload-model</code> - Upload a new model</a></h3>
<p>This command may fail if you attempt to overwrite an existing model, or if the model you attempt to upload is not syntactically valid.</p>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;upload-model&quot;</code></td></tr>
<tr><td>name</td><td>string</td><td>The (base)name of the model in storage</td></tr>
<tr><td>type</td><td>string</td><td>Model type - same options as <code>model-def</code>'s <code>type</code> field</td></tr>
<tr><td>definition</td><td>string</td><td>The model itself, inlined as a string</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">command = {
    &quot;command&quot;: &quot;upload-model&quot;,
    &quot;name&quot;: &quot;sir.easel&quot;,
    &quot;type&quot;: &quot;easel&quot;,
    &quot;definition&quot;: &quot;model SIR:\n  let beta = 0.4\n  let gamma = 0.04\n\n  let s_initial = 997\n  let i_initial = 3\n  let r_initial = 0\n\n  state S = s_initial\n  state I = i_initial\n  state R = r_initial\n\n  let total_population = S + I + R\n\n  event Infect:\n    when:\n      S &gt; 0 and I &gt; 0\n    rate: \n      beta * S * I / total_population\n    effect:\n      S -= 1\n      I += 1\n      \n  event Remove:\n    when:\n      I &gt; 0\n    rate: \n      gamma * I\n    effect:\n      I -= 1\n      R += 1\n      \n      &quot;
}
</code></pre>
<p><strong>Response:</strong></p>
<p>The result, if successful, is a <code>model-def</code> object with the new file in the <code>source</code> field.</p>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;source&quot;: { &quot;file&quot;: &quot;modelRepo/easel/sir.easel&quot; },
    &quot;type&quot;: &quot;easel&quot;
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prtnet-gromet-specification"><a class="header" href="#prtnet-gromet-specification">PrTNet Gromet Specification</a></h1>
<p>PrTNet Gromet is a JSON based representation of stochastic Petri nets.
Abstractly, a stochastic Petri net is a collection of <em>state</em> variables,
and a collection of <em>transitions</em>, which specify how the state variables may
change.   Each state variable has an initial condition, and the format
also supports <em>parameterized</em> Petri nets, used to describe a family of
related Petri nets.</p>
<p>The specification uses the following concepts:</p>
<ul>
<li>
<p><em>junctions</em> are used to represent the states of the Petri Net</p>
</li>
<li>
<p><em>boxes</em> are used to group conceptually related entities;
in particular the entire model is a box containg the junctions
for the state variables, and boxes for the transitions</p>
</li>
<li>
<p><em>ports</em> are used to mark inputs or outputs of boxes;
data only flows in and out of boxes through ports</p>
</li>
<li>
<p><em>wires</em> are used to specify how data flows around the system;
wires may connect two ports, or a port and a junction:</p>
<ul>
<li>a wire that flows into a junction indicates setting the value of
a state variable</li>
<li>a wire flowing out of a junction indicates getting the value of
a state variable</li>
</ul>
</li>
</ul>
<h2 id="top-level-object"><a class="header" href="#top-level-object">Top Level Object</a></h2>
<p>A PrTNet Gromet is JSON object with the following form:</p>
<pre><code>PRTNET :=
  { &quot;syntax&quot;    = &quot;Gromet&quot;
  , &quot;type&quot;      = &quot;PrTNet&quot;
  , &quot;name&quot;      = STRING
  , &quot;metadata&quot;  = null          // XXX: Format to be determined
  , &quot;uid&quot;       = STRING
  , &quot;root&quot;      = BOX_ID        // The top-level box for the model
  , &quot;ports&quot;     = [ PORT ]
  , &quot;wires&quot;     = [ WIRE ]
  , &quot;junctions&quot; = [ JUNCTION ]
  , &quot;boxes&quot;     = [ BOX ]
  }
</code></pre>
<h2 id="unique-identifiers"><a class="header" href="#unique-identifiers">Unique Identifiers</a></h2>
<p>The specifications uses various forms of unique identifiers, which are
all strings, but we give them explicit names to indicate what entities they
identify.</p>
<pre><code>BOX_ID      := STRING
PORT_ID     := STRING
WIRE_ID     := STRING
JUNCTION_ID := STRING
</code></pre>
<p>Note that these identifiers are unique for a given PrTNet object, but
are <em>not</em> globally unique.</p>
<h2 id="value-types"><a class="header" href="#value-types">Value Types</a></h2>
<p>Most entities also contain a field indicating its type, which may
be one of the following:</p>
<pre><code>VALUE_TYPE :=
    &quot;T:Real&quot;                // The type of real numbers
  | &quot;T:Bool&quot;                // The type of booleans
</code></pre>
<h2 id="junctions"><a class="header" href="#junctions">Junctions</a></h2>
<p>Junctions are used to represent the states of the Petri Net.
They will only appear in the top-level box for the model.
Each junction will have the following connections:</p>
<ul>
<li>A wire from each event box that may modify the state to the junction</li>
<li>A wire from an <em>expression box</em> to the junction, specifying the
initial state of the variable</li>
<li>A wire from the junction to each <em>event</em> box that needs to use
the value of the variable.</li>
</ul>
<pre><code>JUNCTION :=
  { &quot;syntax&quot;     = &quot;Junction&quot;
  , &quot;uid&quot;        = JUNCTION_ID
  , &quot;type&quot;       = &quot;T:State&quot;
  , &quot;value_type&quot; = VALUE_TYPE
  }
</code></pre>
<h2 id="wires"><a class="header" href="#wires">Wires</a></h2>
<p>Wires are used to specify how data flows around the model.</p>
<pre><code>WIRE :=
  { &quot;syntax&quot;      = &quot;Wire&quot;
  , &quot;uid&quot;         = WIRE_ID
  , &quot;type&quot;        = &quot;T:Directed&quot;
  , &quot;value_type&quot;  = VALUE_TYPE
  , &quot;metadata&quot;    = null                     // XXX
  , &quot;src&quot;         = PORT_ID | JUNCTION_ID
  , &quot;tgt&quot;         = PORT_ID | JUNCTION_ID
  }
</code></pre>
<h2 id="ports"><a class="header" href="#ports">Ports</a></h2>
<p>Ports are used to specify inputs and outputs of a box.  Input ports
are of type <code>&quot;T:Input&quot;</code> while output ports are of type <code>&quot;T:Output&quot;</code>.
An exception to this is that the ports for the outermost model box
are of type <code>&quot;T:Parameter&quot;</code>.</p>
<pre><code>PORT :=
  { &quot;syntax&quot;     = &quot;Port&quot;
  , &quot;type&quot;       = &quot;T:Parameter&quot; | &quot;T:Input&quot; | &quot;T:Output&quot;
  , &quot;name&quot;       = STRING
  , &quot;metadata&quot;   = null        // Format to be determined
  , &quot;value_type&quot; = VALUE_TYPE
  , &quot;uid&quot;        = PORT_ID
  , &quot;box&quot;        = BOX_ID      // Owner of the port
  }
</code></pre>
<h2 id="boxes"><a class="header" href="#boxes">Boxes</a></h2>
<p>Boxes are a generic components used to group related entities.
There are two flavors of boxes:</p>
<ul>
<li><em>relation</em> boxes are used for grouping, and may contain other boxes</li>
<li><em>expression</em> boxes contain a tree describing a mathematical expression</li>
</ul>
<pre><code>BOX := REL_BOX | EXPR_BOX
</code></pre>
<h3 id="relation-boxes"><a class="header" href="#relation-boxes">Relation Boxes</a></h3>
<p>Relation boxes have the following format:</p>
<pre><code>REL_BOX :=
  { &quot;syntax&quot;    = &quot;Relation&quot;
  , &quot;type&quot;      = &quot;PrTNet&quot; | &quot;T:Event&quot; | &quot;T:Enable&quot; | &quot;T:Rate&quot; | &quot;T:Effect&quot;
  , &quot;uid&quot;       = BOX_ID
  , &quot;name&quot;      = STRING
  , &quot;wires&quot;     = [ WIRE_ID ]      // Wires contained in this box
  , &quot;boxes&quot;     = [ BOX_ID ]       // Nested boxes
  , &quot;ports&quot;     = [ PORT_ID ]      // Ports for the box
  , &quot;junctions&quot; = [ JUNCTION_ID ]  // Nested junctions
  }
</code></pre>
<p>Relation boxes are nested as follows:</p>
<ul>
<li>
<p>The only box of type <code>&quot;PrTNet&quot;</code> is the outermost box containing the
whole model</p>
</li>
<li>
<p>The <code>&quot;PrTNet&quot;</code> box may contain only <code>&quot;T:Event&quot;</code> boxes and expression boxes;
The expression boxes at this level are used for the inital values
of the state variables, as well as to name expressions that may be
used in multiple places in the model</p>
</li>
<li>
<p>An <code>&quot;T:Event&quot;</code> box is going to have exactly 3 nested boxes:</p>
<ul>
<li>One of type <code>&quot;T:Enable&quot;</code></li>
<li>One of type <code>&quot;T:Rate&quot;</code></li>
<li>One of type <code>&quot;T:Effect&quot;</code></li>
</ul>
</li>
<li>
<p>A <code>&quot;T:Enable&quot;</code> box contains a single expression box, describing the
enabling condition for the given event</p>
</li>
<li>
<p>A <code>&quot;T:Rate&quot;</code> box contains a single expression box, describing the
rate at which this event may occur</p>
</li>
<li>
<p>A <code>&quot;T:Effect&quot;</code> box contains a collection of expression boxes, one
for each variable that may be affected by the event.</p>
</li>
</ul>
<p>Only <code>&quot;T:Event&quot;</code> and <code>&quot;T:Effect&quot;</code> boxes have output ports, which are used
to show how state variables are affected by events.</p>
<h3 id="expression-boxes"><a class="header" href="#expression-boxes">Expression Boxes</a></h3>
<p>Expression boxes contain a mathematical expression.  Some have an
output port, which is used to indicate where the expression is used.
Others (e.g. in <code>&quot;T:Enable&quot;</code> and in <code>&quot;T:Rate&quot;</code>) do not have an output
port as the expession is only part of the specification.</p>
<pre><code>EXPR_BOX :=
  { &quot;syntax&quot;    = &quot;Expression&quot;
  , &quot;uid&quot;       = BOX_ID
  , &quot;name&quot;      = STRING
  , &quot;tree&quot;      = EXPR             // Exp
  , &quot;ports&quot;     = [ PORT_ID ]      // Ports for the box
  , &quot;wires&quot;     = [ ]
  , &quot;boxes&quot;     = [ ]
  , &quot;junctions&quot; = [ ]
  }
</code></pre>
<p>Mathematical expressions are encoded as follows:</p>
<pre><code>EXPR := LIT_EXPR      // A literal
      | PORT_ID       // Link to a port
      | CALL_EXPR     // Use of an operator

LIT_EXPR :=
  { &quot;type&quot;      = VALUE_TYPE
  , &quot;value&quot;     = STRING          // Value for the literal
  , &quot;metadata&quot;  = null            // Format to be determined
  }

CALL_EXPR :=
  { &quot;syntax&quot;  = &quot;Expr&quot;
  , &quot;call&quot;    = OPERATOR
  , &quot;args&quot;    = [ EXPR ]
  }

OPERATOR :=
  { &quot;syntax&quot; = &quot;RefOp&quot;
  , &quot;name&quot;   = &quot;not&quot; | &quot;exp&quot; | &quot;log&quot;
             | &quot;+&quot; | &quot;-&quot; | &quot;*&quot; | &quot;/&quot;
             | &quot;lt&quot; | &quot;leq&quot; | &quot;==&quot;
             | &quot;and&quot; | &quot;or&quot;
             | &quot;if&quot;
  }
</code></pre>
<h2 id="example-1"><a class="header" href="#example-1">Example</a></h2>
<p>The following picture is a visualization of a PrTNet document.  The ports at
the top part of box are input ports, while the ports at the bottom are output
ports.</p>
<p><img src="gromet/PrT.svg" alt="Example" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="milestones"><a class="header" href="#milestones">Milestones</a></h1>
<h2 id="m1b"><a class="header" href="#m1b">M1B</a></h2>
<h3 id="galois"><a class="header" href="#galois">Galois</a></h3>
<p><a href="https://owncloud.galois.com/index.php/f/672223">Initial integration plan</a></p>
<h3 id="uncharted"><a class="header" href="#uncharted">Uncharted</a></h3>
<p><a href="https://docs.google.com/presentation/d/1iVMypBEQutvqlZ0_kwYGy4Wy6fmoiWYqV3w8DHcnqe8/edit?ts=6009a8e8">Initial integration plan</a></p>
<h2 id="m2b"><a class="header" href="#m2b">M2B</a></h2>
<h3 id="galois-1"><a class="header" href="#galois-1">Galois</a></h3>
<p><a href="https://owncloud.galois.com/index.php/f/672224">Initial Report of AMIDOL as a Service with ASKE ecosystem</a></p>
<h3 id="uncharted-1"><a class="header" href="#uncharted-1">Uncharted</a></h3>
<p>Uncharted initial release of <a href="https://github.com/uncharted-aske">codebase</a></p>
<h2 id="m3b"><a class="header" href="#m3b">M3B</a></h2>
<h3 id="galois-2"><a class="header" href="#galois-2">Galois</a></h3>
<p>Galois initial <a href="https://github.com/GaloisInc/ASKE-E">code release</a></p>
<h3 id="uncharted-2"><a class="header" href="#uncharted-2">Uncharted</a></h3>
<p>Uncharted has updated <a href="https://github.com/uncharted-aske">their code repository</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
                
    </body>
</html>
