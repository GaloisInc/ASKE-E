<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Donu - ASKE-E Documentation</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="easel.html"><strong aria-hidden="true">1.</strong> EASEL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="model.html"><strong aria-hidden="true">1.1.</strong> model</a></li><li class="chapter-item expanded "><a href="parameter-variable.html"><strong aria-hidden="true">1.2.</strong> parameter-Declared Variables</a></li><li class="chapter-item expanded "><a href="let-variable.html"><strong aria-hidden="true">1.3.</strong> let-Declared Variables</a></li><li class="chapter-item expanded "><a href="state-variable.html"><strong aria-hidden="true">1.4.</strong> state-Declared Variables</a></li><li class="chapter-item expanded "><a href="event.html"><strong aria-hidden="true">1.5.</strong> events</a></li><li class="chapter-item expanded "><a href="when.html"><strong aria-hidden="true">1.6.</strong> when</a></li><li class="chapter-item expanded "><a href="rate.html"><strong aria-hidden="true">1.7.</strong> rate</a></li><li class="chapter-item expanded "><a href="effect.html"><strong aria-hidden="true">1.8.</strong> effect</a></li><li class="chapter-item expanded "><a href="example.html"><strong aria-hidden="true">1.9.</strong> Example</a></li></ol></li><li class="chapter-item expanded "><a href="donu.html" class="active"><strong aria-hidden="true">2.</strong> Donu</a></li><li class="chapter-item expanded "><a href="gromet/PrTNet.html"><strong aria-hidden="true">3.</strong> Gromet</a></li><li class="chapter-item expanded "><a href="milestones.html"><strong aria-hidden="true">4.</strong> Milestones</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">ASKE-E Documentation</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="donu-documentation"><a class="header" href="#donu-documentation">Donu Documentation</a></h1>
<h2 id="about-donu"><a class="header" href="#about-donu">About Donu</a></h2>
<p>Donu is the webservice that is able to run simulations and various kinds of analysis on models
for the ASKE-E program.</p>
<h2 id="calling-convention"><a class="header" href="#calling-convention">Calling Convention</a></h2>
<p>All operations are implemented at path <code>/</code> and are indifferent to HTTP verb 
(<code>GET</code>, <code>POST</code>, etc.)</p>
<h2 id="response-convention"><a class="header" href="#response-convention">Response Convention</a></h2>
<p><em>All</em> responses return a two-element dict. </p>
<p>On success, the members are <code>&quot;status&quot;</code>, which will map to the literal string <code>&quot;success&quot;</code>, and <code>&quot;result&quot;</code>, which will map to a dict containing whatever is specified below in a command's <strong>Response</strong> section.</p>
<p>On error, the members are <code>&quot;status&quot;</code>, which will map to the literal string <code>&quot;error&quot;</code>, and <code>&quot;error&quot;</code>, which will map to a string description of the error.</p>
<p>The provided examples reflect this schema.</p>
<h2 id="types"><a class="header" href="#types">Types</a></h2>
<h3 id="datasource"><a class="header" href="#datasource"><code>datasource</code></a></h3>
<p>A <code>datasource</code> is either an object with the single field <code>model</code> with :</p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>model</td><td>string</td><td>Filename to use as a data source</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{ &quot;model&quot;: &quot;model.gromet&quot; }
</code></pre>
<p>Or a string containing the data itself:</p>
<pre><code class="language-JSON">&quot;model SIR:\n  let beta = 0.4\n  let gamma = 0.04\n  let s_initial = 997...&quot;
</code></pre>
<h3 id="model-def"><a class="header" href="#model-def"><code>model-def</code></a></h3>
<p>A model def is a <code>datasource</code> along with a model type.  Valid model types are <code>easel</code>, <code>diff-eqs</code>, <code>core</code>, <code>gromet-pnc</code>, and <code>gromet-prt</code>.</p>
<p>Example:</p>
<pre><code>{
  &quot;source&quot;: { &quot;model&quot;: &quot;sir.easel&quot; },
  &quot;type&quot;: &quot;easel&quot;
}
</code></pre>
<h2 id="operations"><a class="header" href="#operations">Operations</a></h2>
<h3 id="list-models---list-the-available-models"><a class="header" href="#list-models---list-the-available-models"><code>list-models</code> - List the available models</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;list-models&quot;</code></td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{ &quot;command&quot;: &quot;list-models&quot;}
</code></pre>
<p><strong>Response:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>models</td><td>list</td><td>list of &quot;model-def++&quot; objects - guaranteed to have the same members as a model-def object, but will also include <code>&quot;name&quot;</code> and <code>&quot;description&quot;</code> members for ESL models</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;models&quot;: [
      {
        &quot;source&quot;: { &quot;model&quot;: &quot;sir.easel&quot; },
        &quot;type&quot;: &quot;easel&quot;,
        &quot;name&quot;: &quot;SIR&quot;,
        &quot;description&quot;: &quot;No description.&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="query-models---query-models-based-on-metadata"><a class="header" href="#query-models---query-models-based-on-metadata"><code>query-models</code> - Query models based on metadata</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>The literal <code>&quot;query-models&quot;</code></td></tr>
<tr><td>text</td><td>string</td><td>Text to search for. Accepts wildcards <code>*</code> and <code>?</code>. Searches through model source name, model level metadata (both, as returned by <code>list-models</code>) as well as parameter and measure metadata values for a match.</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;query-models&quot;,
  &quot;text&quot;: &quot;*hospital*&quot;
}
</code></pre>
<p><strong>Response:</strong></p>
<table><thead><tr><th>Description</th></tr></thead><tbody>
<tr><td>list of &quot;model-def++&quot; objects of the same form as returned by <code>list-models</code></td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: [
    {
      &quot;source&quot;: {
          &quot;model&quot;: &quot;seird_hosp.easel&quot;
      },
      &quot;name&quot;: &quot;SEIRS_Hospitalization_Death&quot;,
      &quot;description&quot;: &quot;No description.&quot;,
      &quot;type&quot;: &quot;easel&quot;
    },
    {
      &quot;source&quot;: {
          &quot;model&quot;: &quot;seird_hosp.easel&quot;
      },
      &quot;type&quot;: &quot;gromet-prt&quot;
    }
  ]
}
</code></pre>
<h3 id="simulate---simulate-a-model"><a class="header" href="#simulate---simulate-a-model"><code>simulate</code> - simulate a model</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Stipulations</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>The literal <code>&quot;simulate&quot;</code></td><td></td></tr>
<tr><td>sim-type</td><td>string</td><td>(optional) Simulation engine - one of <code>&quot;aj&quot;</code>, <code>&quot;discrete&quot;</code>, <code>&quot;gsl&quot;</code>, <code>&quot;automates&quot;</code></td><td>Defaults to a model specific simulation type</td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td><td></td></tr>
<tr><td>start</td><td>number</td><td>Start time of the simulation</td><td></td></tr>
<tr><td>end</td><td>number</td><td>End time of the simulation</td><td></td></tr>
<tr><td>step</td><td>number</td><td>Simulation time step size</td><td></td></tr>
<tr><td>seed</td><td>integer</td><td>(optional) Seed for random number generation/event selection</td><td>Only valid when <code>sim-type</code> is <code>discrete</code></td></tr>
<tr><td>domain-parameter</td><td>string</td><td>(optional) Independent variable over which start/step/end varies</td><td>Not yet supported, and only valid when simulating function networks</td></tr>
<tr><td>parameters</td><td>dict</td><td>(optional) Parameter values/initial conditions for the simulation</td><td>When <code>sim-type</code> is <code>aj</code>, parameters specified neither here nor in the model will default to 0</td></tr>
<tr><td>outputs</td><td>list</td><td>Restrict model output to these values</td><td>Leave empty to output all variables</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;simulate&quot;,
  &quot;sim-type&quot;: &quot;gsl&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: { &quot;model&quot;: &quot;sir.easel&quot; }
  },
  &quot;start&quot;: 0,
  &quot;end&quot;: 120.0,
  &quot;step&quot;: 30.0,
  &quot;parameters&quot;: {
    &quot;beta&quot;: 0.9
  }
}
</code></pre>
<p><strong>Response:</strong></p>
<table><thead><tr><th>Description</th></tr></thead><tbody>
<tr><td>A list of simulation results</td></tr>
</tbody></table>
<p>Simulation result schema:</p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>times</td><td>list of number</td><td>series of times used in simulation</td></tr>
<tr><td>values</td><td>result series object</td><td>values of state variables</td></tr>
</tbody></table>
<p>Each object in <code>values</code> is structured such that each key is the name of a model variable <code>V</code> and each value is a list <code>l</code> such that <code>V</code> has the value <code>l[x]</code> at time <code>times[x]</code>.</p>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: [
    {
      &quot;values&quot;: {
        &quot;I&quot;: [
          3,
          396.20766691080604,
          119.33588838987737,
          35.943279530151585,
          10.825907756942332
        ],
        &quot;S&quot;: [
          997,
          0.0012550867795002216,
          2.4726152151230926e-06,
          3.7868257221162325e-07,
          2.151977671793774e-07
        ],
        &quot;R&quot;: [
          0,
          603.7910780024147,
          880.6641091375077,
          964.0567200911661,
          989.1740920278602
        ]
      },
      &quot;times&quot;: [
        0,
        30,
        60,
        90,
        120
      ]
    }
  ]
}
</code></pre>
<h3 id="get-model-schematic---get-schematic-description-of-a-model"><a class="header" href="#get-model-schematic---get-schematic-description-of-a-model"><code>get-model-schematic</code> - get schematic description of a model</a></h3>
<p>This call gets a high level schematic description of a model as a graph.  Not all models support this visualization.</p>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;get-model-schematic&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;get-model-schematic&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: { &quot;model&quot;: &quot;sir.easel&quot; }
  }
}
</code></pre>
<p><strong>Response:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>nodes</td><td>list of node</td><td>A node has a <code>name</code> and a <code>type</code></td></tr>
<tr><td>edges</td><td>list of edge</td><td>An edge is a &quot;tuple&quot; mapping one node to another</td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;nodes&quot;: [
      {
        &quot;name&quot;: &quot;Infect&quot;,
        &quot;type&quot;: &quot;event&quot;
      },
      {
        &quot;name&quot;: &quot;S&quot;,
        &quot;type&quot;: &quot;state&quot;
      },
      {
        &quot;name&quot;: &quot;I&quot;,
        &quot;type&quot;: &quot;state&quot;
      },
      {
        &quot;name&quot;: &quot;Remove&quot;,
        &quot;type&quot;: &quot;event&quot;
      },
      {
        &quot;name&quot;: &quot;R&quot;,
        &quot;type&quot;: &quot;state&quot;
      }
    ],
    &quot;edges&quot;: [
      [
        {
          &quot;name&quot;: &quot;Infect&quot;,
          &quot;type&quot;: &quot;event&quot;
        },
        {
          &quot;name&quot;: &quot;I&quot;,
          &quot;type&quot;: &quot;state&quot;
        }
      ],
      [
        {
          &quot;name&quot;: &quot;S&quot;,
          &quot;type&quot;: &quot;state&quot;
        },
        {
          &quot;name&quot;: &quot;Infect&quot;,
          &quot;type&quot;: &quot;event&quot;
        }
      ],
      [
        {
          &quot;name&quot;: &quot;I&quot;,
          &quot;type&quot;: &quot;state&quot;
        },
        {
          &quot;name&quot;: &quot;Remove&quot;,
          &quot;type&quot;: &quot;event&quot;
        }
      ],
      [
        {
          &quot;name&quot;: &quot;Remove&quot;,
          &quot;type&quot;: &quot;event&quot;
        },
        {
          &quot;name&quot;: &quot;R&quot;,
          &quot;type&quot;: &quot;state&quot;
        }
      ]
    ]
  }
}
</code></pre>
<h3 id="get-model-source---get-source-code-for-a-model"><a class="header" href="#get-model-source---get-source-code-for-a-model"><code>get-model-source</code> - get source code for a model</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;get-model-source&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;get-model-source&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: { &quot;model&quot;: &quot;sir.easel&quot; }
  }
}
</code></pre>
<p><strong>Response:</strong></p>
<p>The result, if successful, is a <code>model-def</code> object with the source inline.</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;source&quot;: &quot;model SIR:\n  let beta = 0.4\n  let gamma = 0.04\n\n  let s_initial = 997\n  let i_initial = 3\n  let r_initial = 0\n\n  state S = s_initial\n  state I = i_initial\n  state R = r_initial\n\n  let total_population = S + I + R\n\n  event Infect:\n    when:\n      S &gt; 0 and I &gt; 0\n    rate: \n      beta * S * I / total_population\n    effect:\n      S -= 1\n      I += 1\n      \n  event Remove:\n    when:\n      I &gt; 0\n    rate: \n      gamma * I\n    effect:\n      I -= 1\n      R += 1\n      \n      &quot;,
    &quot;type&quot;: &quot;easel&quot;
  }
}
</code></pre>
<h3 id="convert-model---convert-a-model-from-one-form-to-another"><a class="header" href="#convert-model---convert-a-model-from-one-form-to-another"><code>convert-model</code> - convert a model from one form to another</a></h3>
<p>May fail if the conversion is not supported.</p>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;convert-model&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td></tr>
<tr><td>dest-type</td><td>string</td><td>Model type to convert to - same fields <code>model-def</code>'s <code>type</code> field</td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;convert-model&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: { &quot;model&quot;: &quot;sir.easel&quot; }
  },
  &quot;dest-type&quot;:&quot;diff-eqs&quot;
}
</code></pre>
<p><strong>Response:</strong></p>
<p>The result, if successful, is a <code>model-def</code> object with the new model inline.</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;source&quot;: &quot;let beta = 0.4\nlet gamma = 0.04\nlet i_initial = 3.0\nlet r_initial = 0.0\nlet s_initial = 997.0\nlet total_population = S + I + R\nI(0) = 3.0\nR(0) = 0.0\nS(0) = 997.0\nd/dt I = (if 0.0 &lt; S and 0.0 &lt; I then 0.4 * S * I / (S + R + I) else 0.0) + (if 0.0 &lt; I then -0.04 * I else 0.0)\nd/dt R = if 0.0 &lt; I then 0.04 * I else 0.0\nd/dt S = if 0.0 &lt; S and 0.0 &lt; I then -0.4 * S * I / (S + R + I) else 0.0&quot;,
    &quot;type&quot;: &quot;diff-eqs&quot;
  }
}
</code></pre>
<h3 id="describe-model-interface---describe-parameters-of-a-model"><a class="header" href="#describe-model-interface---describe-parameters-of-a-model"><code>describe-model-interface</code> - describe parameters of a model</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;describe-model-interface&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Definition of the model</td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;describe-model-interface&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: {
      &quot;model&quot;: &quot;sir.easel&quot;
    }
  }
}
</code></pre>
<p><strong>Response</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>measures</td><td>list of state variables</td><td>Something the can be measured</td></tr>
<tr><td>parameters</td><td>list of parameter</td><td>Something that can be tweaked</td></tr>
</tbody></table>
<p>Both <code>measures</code> and <code>parameters</code> are lists of objects, where each object has
<code>uid</code>, <code>value_type</code> and <code>metadata</code> fields. In addition, parameters may have
a <code>default</code> field.</p>
<p>The <code>metadata</code> is an object with variable fields, but some of interest
are <code>description</code>, <code>name</code>, and <code>group</code>.  In particular, <code>group</code> may be used
as a hint to group related parameters.</p>
<p><strong>Response:</strong></p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;measures&quot;: [
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;I&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;uid&quot;: &quot;I&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;R&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;uid&quot;: &quot;R&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;S&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;uid&quot;: &quot;S&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;total_population&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;uid&quot;: &quot;total_population&quot;
      }
    ],
    &quot;parameters&quot;: [
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;beta&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;uid&quot;: &quot;beta&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;gamma&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;uid&quot;: &quot;gamma&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;i_initial&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;uid&quot;: &quot;i_initial&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;r_initial&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;uid&quot;: &quot;r_initial&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;s_initial&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;uid&quot;: &quot;s_initial&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;beta&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;default&quot;: 0.4,
        &quot;uid&quot;: &quot;beta&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;gamma&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;default&quot;: 0.04,
        &quot;uid&quot;: &quot;gamma&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;i_initial&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;default&quot;: 3,
        &quot;uid&quot;: &quot;i_initial&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;r_initial&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;default&quot;: 0,
        &quot;uid&quot;: &quot;r_initial&quot;
      },
      {
        &quot;metadata&quot;: {
          &quot;name&quot;: &quot;s_initial&quot;
        },
        &quot;value_type&quot;: &quot;Real&quot;,
        &quot;default&quot;: 997,
        &quot;uid&quot;: &quot;s_initial&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="upload-model---upload-a-new-model"><a class="header" href="#upload-model---upload-a-new-model"><code>upload-model</code> - Upload a new model</a></h3>
<p>This command may fail if you attempt to overwrite an existing model, or if the model you attempt to upload is not syntactically valid.</p>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;upload-model&quot;</code></td></tr>
<tr><td>name</td><td>string</td><td>The (base)name of the model in storage</td></tr>
<tr><td>type</td><td>string</td><td>Model type - same options as <code>model-def</code>'s <code>type</code> field</td></tr>
<tr><td>definition</td><td>string</td><td>The model itself, inlined as a string</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">command = {
    &quot;command&quot;: &quot;upload-model&quot;,
    &quot;name&quot;: &quot;sir.easel&quot;,
    &quot;type&quot;: &quot;easel&quot;,
    &quot;definition&quot;: &quot;model SIR:\n  let beta = 0.4\n  let gamma = 0.04\n\n  let s_initial = 997\n  let i_initial = 3\n  let r_initial = 0\n\n  state S = s_initial\n  state I = i_initial\n  state R = r_initial\n\n  let total_population = S + I + R\n\n  event Infect:\n    when:\n      S &gt; 0 and I &gt; 0\n    rate: \n      beta * S * I / total_population\n    effect:\n      S -= 1\n      I += 1\n      \n  event Remove:\n    when:\n      I &gt; 0\n    rate: \n      gamma * I\n    effect:\n      I -= 1\n      R += 1\n      \n      &quot;
}
</code></pre>
<p><strong>Response:</strong></p>
<p>The result, if successful, is a <code>model-def</code> object with the new file in the <code>source</code> field.</p>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;source&quot;: { &quot;model&quot;: &quot;sir.easel&quot; },
    &quot;type&quot;: &quot;easel&quot;
  }
}
</code></pre>
<h3 id="list-datasets-list-available-datasets"><a class="header" href="#list-datasets-list-available-datasets"><code>list-datasets</code> List available datasets</a></h3>
<p><strong>Request:</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;list-datasets&quot;</code></td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;list-datasets&quot;
}
</code></pre>
<p><strong>Response:</strong></p>
<table><thead><tr><th>Description</th></tr></thead><tbody>
<tr><td>A list of dataset descriptions.</td></tr>
</tbody></table>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: [
    {
      &quot;source&quot;: {
        &quot;model&quot;: &quot;example.json&quot;
      },
      &quot;name&quot;: &quot;Example Data&quot;,
      &quot;description&quot;: &quot;Example data drawn from SIR model&quot;
    },
    {
      &quot;source&quot;: {
        &quot;model&quot;: &quot;sir_noise.json&quot;
      },
      &quot;name&quot;: &quot;SIR Infected with Noise&quot;,
      &quot;description&quot;: &quot;Infected values from SIR model with added noise&quot;
    },
    {
      &quot;source&quot;: {
        &quot;model&quot;: &quot;sir_sample.json&quot;
      },
      &quot;name&quot;: &quot;Sample SIR Data&quot;,
      &quot;description&quot;: &quot;Sample data generated from a SIR model&quot;
    }
  ]
}
</code></pre>
<h3 id="get-dataset-get-a-dataset"><a class="header" href="#get-dataset-get-a-dataset"><code>get-dataset</code> Get a dataset</a></h3>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;get-dataset&quot;</code></td></tr>
<tr><td>source</td><td>datasource</td><td>Datasource for model (e.g. from <code>list-datasets</code>)</td></tr>
</tbody></table>
<p><strong>Request:</strong></p>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;command&quot;: &quot;get-dataset&quot;,
  &quot;source&quot;: {&quot;model&quot;: &quot;example.json&quot;}
}
</code></pre>
<p><strong>Response:</strong></p>
<p>Dataset schema:</p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>name</td><td>string</td><td>Display name of this dataset</td></tr>
<tr><td>description</td><td>string</td><td>Human readable description for this data set</td></tr>
<tr><td>columns</td><td>array of column</td><td>List of columns (see column schema)</td></tr>
</tbody></table>
<p>Column schema:</p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>name</td><td>string</td><td>Name of this column</td></tr>
<tr><td>description</td><td>string</td><td>Human readable description for this column</td></tr>
<tr><td>values</td><td>array of numbers</td><td>Data values</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-JSON">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;name&quot;: &quot;Example Data&quot;,
    &quot;description&quot;: &quot;Example data drawn from SIR model&quot;,
    &quot;columns&quot;: [
      {
        &quot;values&quot;: [
          3,
          570.9758710681087,
          177.8779579737781,
          53.66360145338841,
          16.175249034797183
        ],
        &quot;name&quot;: &quot;I&quot;,
        &quot;description&quot;: &quot;Infected Population&quot;
      },
      {
        &quot;values&quot;: [
          0,
          412.987493166334,
          821.8532404022537,
          946.2589265257153,
          983.7715119765173
        ],
        &quot;name&quot;: &quot;R&quot;,
        &quot;description&quot;: &quot;Recovered Population&quot;
      },
      {
        &quot;values&quot;: [
          997,
          16.036635765557786,
          0.2688016239687889,
          0.07747202089688701,
          0.05323898868597068
        ],
        &quot;name&quot;: &quot;S&quot;,
        &quot;description&quot;: &quot;Susceptible Population&quot;
      },
      {
        &quot;values&quot;: [
          0,
          30,
          60,
          90,
          120
        ],
        &quot;name&quot;: &quot;time&quot;,
        &quot;description&quot;: &quot;Time (in days)&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="fit-measure-estimate-model-parameters"><a class="header" href="#fit-measure-estimate-model-parameters"><code>fit-measure</code> Estimate model parameters</a></h3>
<p><strong>Request</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;fit-measure&quot;</code></td></tr>
<tr><td>definition</td><td>model-def</td><td>Datasource for model (e.g. from <code>list-datasets</code>)</td></tr>
<tr><td>parameters</td><td>list of string</td><td>Parameters to try to find values for</td></tr>
<tr><td>data</td><td>dataseries</td><td>Data series to fit against (see below)</td></tr>
</tbody></table>
<p>Data series:</p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>values</td><td>object</td><td>Keys are model variable names, values are lists of points</td></tr>
<tr><td>times</td><td>list of numbers</td><td>Corresponding times for the data points</td></tr>
</tbody></table>
<p>Each value of the <code>values</code> object should be an array of the same length as <code>times</code>.</p>
<p>Example:</p>
<pre><code class="language-json">{
  &quot;command&quot;: &quot;fit-measures&quot;,
  &quot;definition&quot;: {
    &quot;type&quot;: &quot;easel&quot;,
    &quot;source&quot;: { &quot;model&quot;: &quot;sir-meta.easel&quot; }
  },
  &quot;parameters&quot;: [&quot;beta&quot;, &quot;gamma&quot;],
  &quot;data&quot;: {
    &quot;values&quot;: {
      &quot;I&quot;: [
        3, 74.78758342604473, 623.3137065799646, 761.227660031603, 641.3487163757723, 526.5677251792523,
        431.297586129131, 353.1478923294002, 289.1402682575921, 236.73013719570082, 193.81898629689385,
        158.6858700205345, 129.92114428227376, 106.37050988809484, 87.08884901094167, 71.30234380846396,
        58.37743746622634, 47.7954138770176, 39.131582481945436, 32.03823518720198, 26.23069221742839,
        21.47587722450436, 17.582963280246798, 14.395714419465202, 11.786215392681438
      ]
    },
    &quot;times&quot;: [
      0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105, 110, 115, 120
    ]
  }
}
</code></pre>
<p><strong>Response</strong></p>
<p>The <code>result</code> field contains a object whose keys are parameter names and whose values are the estimated parameter values</p>
<p>Example:</p>
<pre><code class="language-json">{
  &quot;status&quot;: &quot;success&quot;,
  &quot;result&quot;: {
    &quot;gamma&quot;: 4.0000000000252035e-2,
    &quot;beta&quot;: 0.6999999999997466
  }
}
</code></pre>
<h2 id="compare-models"><a class="header" href="#compare-models">Compare models</a></h2>
<p>Compare two models, if possible.</p>
<p>(At the moment, &quot;if possible&quot; means that we've already performed a comparison of these two models and stored the result - live comparison isn't currently supported.)</p>
<p><strong>Request</strong></p>
<table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>command</td><td>string</td><td>Command - for this operation it will be the string <code>&quot;compare-models&quot;</code></td></tr>
<tr><td>source</td><td>model-def</td><td>Source of the model acting as the comparison &quot;source&quot;</td></tr>
<tr><td>target</td><td>model-def</td><td>Source of the model acting as the comparison &quot;target&quot;</td></tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-json">{
    &quot;command&quot;: &quot;compare-models&quot;,
    &quot;source&quot;: {
        &quot;type&quot;: &quot;gromet-pnc&quot;,
        &quot;source&quot;: {&quot;model&quot;: &quot;SimpleSIR_metadata_gromet_PetriNetClassic.json&quot;}
    },
    &quot;target&quot;: {
        &quot;type&quot;: &quot;gromet-pnc&quot;,
        &quot;source&quot;: {&quot;model&quot;: &quot;chime+.json&quot;}
    }
}
</code></pre>
<p><strong>Response</strong></p>
<p>The <code>result</code> field contains a list of variable-to-variable mappings, with keys being variables in the source model and values being variables in the target model. The list is in no particular order.</p>
<p>Example:</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;success&quot;,
    &quot;result&quot;: [
        {
            &quot;J:I&quot;: &quot;J:I_U&quot;,
            &quot;J:S&quot;: &quot;J:S&quot;,
            &quot;J:R&quot;: &quot;J:R&quot;,
            &quot;J:gamma&quot;: &quot;J:rec_u&quot;,
            &quot;J:beta&quot;: &quot;J:inf_uu&quot;
        },
        {
            &quot;J:I&quot;: &quot;J:I_V&quot;,
            &quot;J:S&quot;: &quot;J:V&quot;,
            &quot;J:R&quot;: &quot;J:R&quot;,
            &quot;J:gamma&quot;: &quot;J:rec_v&quot;,
            &quot;J:beta&quot;: &quot;J:inf_vv&quot;
        }
    ]
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="example.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="gromet/PrTNet.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="example.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="gromet/PrTNet.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
